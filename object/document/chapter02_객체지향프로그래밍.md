## 객체지향프로그래밍

### 협력, 객체, 클래스

* 객체지향 패러다임으로의 전환은 클래스가 아닌 **객체에 초점을 맞출 때**에만 얻을 수 있다.
* 어떤 클래스가 필요한지를 고민하기 전에 어떤 객체들이 필요한지 고민해야한다.
  * 클래스는 공통적인 상태와 행동을 공유하는 객체들을 추상화한 것
  * 클래스의 윤곽을 잡기 위해서는 어떤 객체들이 어떤 상태와 행동을 가지는지를 먼저 결정해야한다.
* 객체를 독립적인 존재가 아니라 기능을 구현하기 위해 협력하는 공동체의 일원으로 봐야한다.
  * 객체를 고립된 존재로 바라보지 말고 협력에 참여하는 협력자로 바라봐야한다.
  * 객체들의 모양과 윤곽이 잡히면 공통된 특성과 상태를 가진 객체들을 타입으로 분류하고 이 타입을 기반으로 클래스를 구현해야 한다.

### 객체? 클래스?

* 객체와 클래스는 어떻게 다를까?
  * "Customer라는 클래스를 만들었다고 실제 고객이 생기는 걸까?"
  * 클래스(Customer)는 그냥 설계도일 뿐이다. 
  * 실제 고객이 존재하려면 객체를 생성해야 한다.
  * 즉, 클래스를 만들었다고 끝이 아니라, 반드시 객체를 만들어야 프로그램이 실행된다.

개념|설명|예제
---|---|---
클래스 (Class)|객체를 만들기 위한 설계도|```class Customer(val name: String)```
객체 (Object)|클래스의 설계도로 만들어진 실제 실체|```val alice = Customer("Alice")```

* "클래스를 먼저 설계하면 안 된다"는 게 무슨 의미일까?
  * "결국 고객, 계좌, 은행 같은 클래스를 만들 거면, 그냥 클래스 중심으로 생각하면 되는 거 아닌가?"
  * 여기서 핵심은 다음과 같다. **"클래스를 먼저 설계하지 말고, 객체가 어떻게 협력할지 먼저 고민해야 한다."** 
  * 즉, "은행 시스템에는 어떤 클래스가 필요할까?"라고 생각하는 게 아니라, **"은행 시스템에서 어떤 객체들이 존재하고, 어떻게 서로 협력할까?"**를 먼저 고민해야 한다.


* 📌 클래스를 먼저 고민하면 발생하는 문제점 
  * ❌ "음... 은행이니까 BankAccount, Customer, Bank 클래스를 만들어야겠군!"
  * ❌ "이제 각 클래스 안에 어떤 필드와 메서드를 넣을지 고민해볼까?"
  * ❌ "음... 그런데 어떻게 서로 연결하지?"


* 이렇게 되면 객체들의 협력 관계를 나중에 억지로 맞추게 된다.
  * 즉, 객체 간의 자연스러운 협력보다는 '데이터 중심'으로 클래스만 나열하게 된다.
  * 결과적으로, 객체지향이 아니라 절차지향 방식처럼 동작할 가능성이 높아진다.


* 객체지향 프로그래밍의 가장 좋은 방법은 다음과 같다. **"객체들의 역할과 상호작용을 먼저 생각하는 것"**


* 🎭 역할을 먼저 고민하면 다음과 같다.
  * 은행 시스템에는 고객이 있다.
  * 고객은 은행에서 계좌를 개설할 수 있다.
  * 계좌는 입금, 출금 기능을 가지고 있다.
  * 은행은 여러 계좌를 관리한다.


* 위처럼 설계하면 객체들의 역할이 보이고, 이 역할과 상호작용을 코드로 표현하면 비로소 **클래스**가 된다.

### 클래스 구현하기

* 클래스를 구현하거나 다른 개발자에 의해 개발된 클래스를 사용할 때 가장 중요한 것은 **클래스의 경계를 구분 짓는 것** 이다.
* 클래스는 내부와 외부로 구분되며 훌륭한 클래스를 설계하기 위한 핵심은 어떤 부분을 외부에 공개하고 어떤 부분을 감출지를 결정하는 것이다.
* 클래스의 내부와 외부를 구분해야하는 이유는 경계의 명확성이 객체의 자율성을 보장하기 때문이다.
* 또 다른 이유로는 프로그래머에게 구현의 자유를 제공하기 때문이다.

### 자율적인 객체 (경계의 명확성이 객체의 자율성을 보장)

* 객체는 **상태와 행동을 함께 가지는 복합적인 존재**다.
* 객체는 **스스로 판단하고 행동하는 자율적인 존재**다.


* 캡슐화(Encapsulation)란? 
  * 📌 정의
    * 객체의 데이터(필드, 상태)와 행동(메서드, 기능)을 하나로 묶는 것
    * 데이터를 외부에서 직접 접근하지 못하도록 보호하는 것
  * 📌 비유하자면?
    * ✔ 자동차를 생각해 보자!
    * ✔ 자동차 내부에는 엔진, 변속기, 브레이크 시스템 같은 중요한 부품이 있어.
    * ✔ 하지만 운전자가 엔진을 직접 만지는 게 아니라, 가속 페달과 브레이크(인터페이스)를 통해 조작하지!
    * 👉 자동차 내부 부품은 캡슐화되어 있고, 운전자는 외부에서 조작 가능한 기능만 사용할 수 있는 것과 같아!


* 캡슐화를 통해 객체 내부에 대한 접근을 통제하는 이유는 객체를 자율적인 존재로 만들기 위해서다.
* 즉, **"경계를 명확히 해야 객체의 자율성을 보장할 수 있다."**
  * 💡 여기서 "객체의 자율성"이란?
    * 👉 객체가 자기 자신을 스스로 관리하고, 외부에서 멋대로 조작하지 못하게 하는 것!
  * 만약 내부 데이터를 외부에서 마음대로 변경할 수 있다면?
    * 👉 객체가 스스로의 상태를 안전하게 유지할 수 없게 돼.


* 일반적으로 객체의 상태는 숨기고 행동만 외부에 공개해야 한다.
* 따라서, 클래스의 속성은 private 으로 선언해서 감추고, 외부에 제공해야하는 일부 메서드만 public 으로 선언하면 좋다.

### 프로그래머의 자유 (프로그래머에게 구현의 자유를 제공)

* 클래스 작성자는 클라이언트 프로그래머에게 필요한 부분만 공개하고 나머지는 숨긴다. 
  * 구현 은닉 : 클라이언트 프로그래머가 숨겨 놓은 부분에 마음대로 접근할 수 없도록 방지함으로써 클라이언트 프로그래머에 대한 영향을 걱정하지 않고, 마음대로 변경할 수 있다.
* 클라이언트 프로그래머는 필요한 클래스들을 엮어서 애플리케이션을 빠르고 안정적으로 구축한다.